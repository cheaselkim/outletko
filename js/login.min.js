function isEmail(e){return/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/.test(e)}function business_category(){var e="",s=$("input[name=csrf_name]").val();e=document.location.href==base_url?"Signup/business_category":base_url+"Signup/business_category",$.ajax({data:{csrf_name:s},type:"GET",url:e,dataType:"JSON",success:function(e){for(var s=0;s<e.result.length;s++)$("#signup_bussiness_category").append("<option value='"+e.result[s].id+"'>"+e.result[s].desc+"</option>")},error:function(e){console.log(e.responseText)}})}function check_login_field(){var e=jQuery.trim($("#login_email").val()).length,s=jQuery.trim($("#login_password").val()).length;e<=0||s<=0?swal({type:"warning",title:"Please input all required fields"}):check_login()}function check_login(){var e=$("input[name=csrf_name]").val(),s=$("#login_email").val(),n=$("#login_password").val(),i="";document.location.href;i=document.location.href==base_url?"Signup/check_login":base_url+"Signup/check_login",$.ajax({data:{csrf_name:e,username:s,password:n},type:"POST",dataType:"JSON",url:i,success:function(e){$("input[name=csrf_name]").val(e.token),"1"==e.login?"1"==e.otp?window.open(base_url,"_self"):"5"==e.user_type?base_url==document.location.href?window.open(base_url+"my-order","_self"):document.location.href==base_url+"login"?window.open(base_url+"my-order","_self"):location.reload():window.open(base_url,"_self"):$("#login-error").show()},error:function(e){console.log(e.responseText)}})}function check_signup_field(){var e=jQuery.trim($("#signup_user_fname").val()).length,s=jQuery.trim($("#signup_user_lname").val()).length,n=jQuery.trim($("#signup_user_email").val()).length,i=jQuery.trim($("#signup_user_password").val()).length,a=jQuery.trim($("#signup_user_conf_password").val()).length;e<=0||s<=0||n<=0||i<=0||a<=0?swal({type:"warning",title:"Please input all required fields."}):$("#password").val()!=$("#conf_pass").val()?swal({type:"warning",title:"Password does not match"}):"1"==$("#signup_user_email").attr("data-exists")?swal({type:"warning",title:"Email already Exists"}):insert_user()}function insert_user(){console.log("insert_user");var e=$("input[name=csrf_name]").val(),s=$("#signup_user_fname").val(),n=$("#signup_user_lname").val(),i=$("#signup_user_email").val(),a=$("#signup_user_password").val(),r=$("#signup_user_conf_password").val();$.ajax({data:{csrf_name:e,fname:s,lname:n,email:i,password:a,conf_pass:r},type:"POST",dataType:"JSON",url:base_url+"Signup/insert_user",beforeSend:function(){swal({title:"Saving....",showCancelButton:!1,showConfirmButton:!1})},success:function(e){swal.close(),$("#acc_id").val(e.comp_id),$("input[name=csrf_name]").val(e.token),$("#div-signup-form").hide(),$("#btn_signup2").hide(),$("#div-confirm-email2").show(),$("#btn_confirm2").show()},error:function(e){console.log(e.responseText)}})}function confirm_account(){var e=$("#verify_code").val(),s=$("#acc_id").val(),n=$("input[name=csrf_name]").val();$.ajax({data:{verify_code:e,csrf_name:n,id:s},type:"POST",dataType:"JSON",url:base_url+"Signup/confirm_account",success:function(e){$("input[name=csrf_name]").val(e.token),1==e.result?($("#div-signup-form").hide(),$("#btn_signup").hide(),$("#div-confirm-email").hide(),$("#btn_confirm2").hide(),$("#div-login-form").show(),$("#btn_login").show(),$("#modal_signup_user").modal("hide"),swal({type:"success",title:"Congratulations!",text:"You can start buying products"},function(){location.reload()})):swal({type:"warning",title:"Invalid Verification Code",text:"Please try again"})},error:function(e){console.log(e.responseText)}})}function check_required_fields(){var e=$("#signup_first_name").val(),s=($("#signup_middle_name").val(),$("#signup_last_name").val()),n=$("#signup_username").val(),i=$("#signup_password").val(),a=$("#signup_conf_password").val(),r=$("#signup_address").val(),t=$("#signup_town").val(),o=$("#signup_country").val(),l=$("#signup_mobile").val(),u=$("#signup_email").val(),d=$("#signup_bussiness_category").val(),c=$("#signup_businessname").val(),_=0;(jQuery.trim(e).length<=0||jQuery.trim(s).length<=0||jQuery.trim(n).length<=0||jQuery.trim(i).length<=0||jQuery.trim(a).length<=0||jQuery.trim(r).length<=0||jQuery.trim(t).length<=0||jQuery.trim(o).length<=0||jQuery.trim(l).length<=0||jQuery.trim(u).length<=0||jQuery.trim(d).length<=0||jQuery.trim(c).length<=0)&&(swal({type:"warning",title:"Please fill up required fields."}),jQuery.trim(e).length<=0&&$("#signup_first_name").addClass("error"),jQuery.trim(s).length<=0&&$("#signup_last_name").addClass("error"),jQuery.trim(n).length<=0&&$("#signup_username").addClass("error"),jQuery.trim(i).length<=0&&$("#signup_password").addClass("error"),jQuery.trim(a).length<=0&&$("#signup_conf_password").addClass("error"),jQuery.trim(r).length<=0&&$("#signup_address").addClass("error"),jQuery.trim(t).length<=0&&$("#signup_town").addClass("error"),jQuery.trim(o).length<=0&&$("#signup_country").addClass("error"),jQuery.trim(l).length<=0&&$("#signup_mobile").addClass("error"),jQuery.trim(u).length<=0&&$("#signup_email").addClass("error"),jQuery.trim(d).length<=0&&$("#signup_bussiness_category").addClass("error"),jQuery.trim(c).length<=0&&$("#signup_businessname").addClass("error"),_++),i!=a&&(_++,swal({type:"warning",title:"Password does not match!"}));var p=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;if(p.test(u),p.test(u)||(_++,swal({type:"warning",title:"Invalid Email Address"})),_>0)return $("#signup_save").prop("disabled",!1),!1;save_signup()}function save_signup(){var e=$("#signup_first_name").val(),s=$("#signup_middle_name").val(),n=$("#signup_last_name").val(),i=$("#signup_username").val(),a=$("#signup_password").val(),r=($("#signup_conf_password").val(),$("#signup_address").val()),t=($("#signup_town").val(),$("#signup_country").val(),$("#signup_mobile").val()),o=$("#signup_email").val(),l=$("#signup_bussiness_category").val(),u=$("#signup_businessname").val(),d=$("#signup_town").attr("data-id"),c=$("#signup_town").attr("data-prov"),_=u,p={info_outletsuite:{account_id:"",status:0,first_name:e,middle_name:s,last_name:n,username:i,password:a,email:o},info_outletko:{account_id:"",account_name:u,link_name:_=(_=$.trim(_.toString().toLowerCase())).replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,""),account_status:0,confirm_email:0,business_category:l,username:i,password:a,first_name:e,middle_name:s,last_name:n,address:r,city:d,user_id:"0",province:c,email:o,mobile_no:t},csrf_name:$("input[name=csrf_name]").val()};$.ajax({data:p,type:"POST",url:"Signup/save_data",dataType:"json",crossOrigin:!1,beforeSend:function(){},success:function(e){$("input[name=csrf_name]").val(e.token),$("#signup_id").val(e.id),$("#signup_back").hide(),$("#signup_next").hide(),$("#signup_cancel").hide(),$("#signup_save").hide(),$("#div-form").hide(),$("#div-save").show(),$("#signup_close").show()},error:function(e){console.log(e.responseText)}})}function resend_email(){console.log("Resend Email");var e=$("#signup_email").val(),s=$("#signup_password").val(),n=$("#signup_username").val(),i=$("#signup_id").val(),a=$("input[name=csrf_name]").val();$.ajax({data:{email:e,password:s,username:n,account_id:i,csrf_name:a},type:"POST",dataType:"JSON",crossOrigin:!1,url:"Signup/resend_email",success:function(e){console.log(e),$("input[name=csrf_name]").val(e.token),swal({type:"success",title:"Successfully Re-send Email."},function(){location.reload()})},error:function(e){console.log(e.responseText)}})}$(document).ready(function(){$("#wrong_pass").hide(),$("#div-body").css("display","block"),$("#signup_next").hide(),$("#signup_back").hide(),$("#btn_signup").hide(),$("#div-confirm-email2").hide(),$("#div-confirm-email").hide(),$("#btn_confirm").hide(),$("#btn_confirm2").hide(),$("#div-form").hide(),$("#login-error").hide(),$("#signup_next").hide(),$("#signup_back").hide(),$("#btn_signup").hide(),$("#div-confirm-email2").hide(),$("#div-confirm-email").hide(),$("#btn_confirm").hide(),$("#btn_confirm2").hide(),$("#div-form").hide(),$("#login-error").hide(),$("#span-email").hide(),$("#go").click(function(){"ZugriffP@ssw0rd"==$("#website_password").val()?($("#website_modal").modal("hide"),$("#div-body").css("display","block"),$("#wrong_pass").hide()):($("#div-body").css("display","none"),$("#website_modal").modal("show"),$("#wrong_pass").show())}),$(".navbar-nav > li > a").on("click",function(){$(".navbar-collapse").collapse("hide")}),$(".navbar-nav > li > button").on("click",function(){$(".navbar-collapse").collapse("hide")}),$("#btn_mod_signin").click(function(){$("#modal_signup").modal("hide"),$("#modal-image").modal("hide")}),$("#btn_mod_signup").click(function(){$("#modal_signup_user").modal("hide"),$("#modal-image").modal("hide")}),$("#ads-2").hide(),$("#error_message").hide(),$("#div-business").hide(),$("#div-address").hide(),$("#signup_save").hide(),$("#signup_close").hide(),$("#div-save").hide(),"1"==$("#login_error").val()&&($("#modal_login").modal("show"),$("#error_message").show()),$("#signup_first_name").keyup(function(){$(this).removeClass("error")}),$("#signup_last_name").keyup(function(){$(this).removeClass("error")}),$("#signup_username").keyup(function(){$(this).removeClass("error")}),$("#signup_password").keyup(function(){$(this).removeClass("error")}),$("#signup_conf_password").keyup(function(){$(this).removeClass("error")}),$("#signup_businessname").keyup(function(){$(this).removeClass("error")}),$("#signup_bussiness_category").change(function(){$(this).removeClass("error")}),$("#signup_address").keyup(function(){$(this).removeClass("error")}),$("#signup_town").keyup(function(){$(this).removeClass("error")}),$("#signup_country").keyup(function(){$(this).removeClass("error")}),$("#signup_mobile").keyup(function(){$(this).removeClass("error")}),$("#signup_email").keyup(function(){$(this).removeClass("error")}),$("#signup_email").focusout(function(){var e=isEmail($(this).val());console.log(e)}),$("#signup_next").click(function(){$("#signup_back").show();var e=$("#signup_first_name").val(),s=($("#signup_middle_name").val(),$("#signup_last_name").val()),n=$("#signup_username").val(),i=$("#signup_password").val(),a=$("#signup_conf_password").val(),r=($("#signup_address").val(),$("#signup_town").val(),$("#signup_country").val(),$("#signup_mobile").val(),$("#signup_email").val(),$("#signup_bussiness_category").val()),t=$("#signup_businessname").val();$("#div-name").is(":visible")?jQuery.trim(e).length<=0||jQuery.trim(s).length<=0||jQuery.trim(n).length<=0||jQuery.trim(i).length<=0||jQuery.trim(a).length<=0?(swal({type:"warning",title:"Please fill up required fields."}),jQuery.trim(e).length<=0&&$("#signup_first_name").addClass("error"),jQuery.trim(s).length<=0&&$("#signup_last_name").addClass("error"),jQuery.trim(n).length<=0&&$("#signup_username").addClass("error"),jQuery.trim(i).length<=0&&$("#signup_password").addClass("error"),jQuery.trim(a).length<=0&&$("#signup_conf_password").addClass("error")):a!=i?(swal({type:"warning",title:"Password does not match"}),$("#signup_conf_password").addClass("error"),$("#signup_password").addClass("error")):($("#next-1").removeClass("fas fa-circle"),$("#next-1").addClass("fas fa-check-circle"),$("#next-2").addClass("text-black"),$("#div-name").hide(),$("#div-business").show("slide",{direction:"left"},1500),$("#div-business").show()):$("#div-business").is(":visible")&&(jQuery.trim(r).length<=0||jQuery.trim(t).length<=0?(swal({type:"warning",title:"Please fill up required fields."}),jQuery.trim(r).length<=0&&$("#signup_bussiness_category").addClass("error"),jQuery.trim(t).length<=0&&$("#signup_businessname").addClass("error")):($("#next-2").removeClass("fas fa-circle"),$("#next-2").addClass("fas fa-check-circle"),$("#next-3").addClass("text-black"),$("#div-business").hide(),$("#div-address").show("slide",{direction:"left"},1500),$("#div-address ").show(),$("#signup_next").hide(),$("#signup_save").show()))}),$("#signup_back").click(function(){$("#div-business").is(":visible")?($("#next-1").removeClass("fas fa-check-circle"),$("#next-1").addClass("fas fa-circle"),$("#next-2").removeClass("text-black"),$("#div-business").hide(),$("#div-name").show("slide",{direction:"right"},1500),$("#div-name").show()):$("#div-address").is(":visible")&&($("#next-2").removeClass("fas fa-check-circle"),$("#next-2").addClass("fas fa-circle"),$("#next-3").removeClass("text-black"),$("#div-address").hide(),$("#div-business").show("slide",{direction:"right"},1500),$("#div-business").show(),$("#signup_next").show(),$("#signup_save").hide())}),$("#signup_town").keyup(function(){""==$(this).val()&&$("#outlet_province").val("")}),$("#signup_town").autocomplete({select:function(e,s){$("#signup_town").attr("data-id",s.item.city_id),$("#signup_town").attr("data-prov",s.item.prov_id)},source:function(e,s){var n=$("input[name=csrf_name]").val(),i=$("#signup_town").val();$.ajax({url:"Signup/search_city_prov/",dataType:"json",type:"POST",data:{city:i,csrf_name:n},success:function(e){$("input[name=csrf_name]").val(e.token),"true"==e.response?s(e.result):($("#signup_town").val(""),$("#signup_town").attr("data-id",""),$("#signup_town").attr("data-prov",""),s(""))},error:function(e){console.log("Error: "+e.responseText)}})}}),$("#signup_close").click(function(){window.open(base_url,"_self")}),$("#signup_save").click(function(){$(this).prop("disabled",!0),check_required_fields()}),$("#resend").click(function(){resend_email()}),$("#a_login").click(function(){$("#div-signup-form").hide(),$("#btn_signup").hide(),$("#div-login-form").show(),$("#btn_login").show()}),$("#a_register").click(function(){$("#div-login-form").hide(),$("#btn_login").hide(),$("#div-signup-form").show(),$("#btn_signup").show()}),$("#a_register_store").click(function(){$("#div-signup-form").hide(),$("#btn_signup2").hide(),$("#div-business").hide(),$("#div-address ").hide(),$("#next-1").addClass("fas fa-circle"),$("#next-2").addClass("fas fa-circle"),$("#next-1").removeClass("fas fa-check-circle"),$("#next-2").removeClass("fas fa-check-circle"),$("#next-2").removeClass("text-black"),$("#next-3").removeClass("text-black"),$("#div-form").find(":input").val(""),$("#div-name").show(),$("#div-form").show(),$("#signup_next").show()}),$("#a_signup").click(function(){$("#div-form").hide(),$("#signup_next").hide(),$("#signup_back").hide(),$("#signup_save").hide(),$("#div-signup-form").find(":input").val(""),$("#div-signup-form").show(),$("#btn_signup2").show()}),$("#btn_signup").click(function(){check_signup_field()}),$("#btn_signup2").click(function(){check_signup_field()}),$("#btn_confirm").click(function(){confirm_account()}),$("#btn_confirm2").click(function(){confirm_account()}),$("#btn_login").click(function(){check_login_field()}),$("#login_email").on("keypress",function(e){13==e.which&&check_login_field()}),$("#login_password").on("keypress",function(e){13==e.which&&check_login_field()}),$("#verify_code").bind("cut copy paste",function(e){e.preventDefault()}),$("#signup_user_email").blur(function(){var e=$(this).val(),s=$("input[name='csrf_name']").val();$("#signup_user_email").attr("data-exists","0"),$.ajax({data:{email:e,csrf_name:s},type:"POST",dataType:"JSON",url:base_url+"Store_register/check_email",success:function(e){console.log(e),$("input[name='csrf_name']").val(e.token),e.result>0?($("#signup_user_email").attr("data-exists","1"),$("#span-email").show()):$("#span-email").hide()},error:function(e){console.log(e.responseText)}})})});