function div_hide(){$("#div-info").hide(),$("#div-plan").hide(),$("#div-cart").hide(),$("#div-bill").hide(),$("#div-payment").hide(),$("#div-payment-details").hide()}function plan(){var a=$("input[name=csrf_name]").val();$.ajax({type:"GET",url:base_url+"Store_register/plan",dataType:"JSON",data:{csrf_name:a},success:function(a){$("input[name=csrf_name]").val(a.token),category();var t=a.result,e="",n="";for(let a=0;a<t.length;a++){e=4==a?"style='border-right: 1px solid black'":a==t.length-1?"style='border-right: 1px solid black'":"";var l=t[a].plan_title.split(" ");n=void 0!==l[1]?l[0]+" <span class='font-weight-bold'>"+l[1]+"</span>":"<span class='font-weight-bold'>"+l[0]+"</span>",$("#div-plan-dtls").append("<div class='col-12 col-lg-15 col-md-6 col-sm-12 px-0 mt-2'><div class='mx-auto text-center div-plan' "+e+"> <p class='font-size-35 font-weight-600 mb-0 plan-type-name' data-desc='"+t[a].plan_name+"'>"+n+"</p> <p class='font-size-25 font-weight-600 mb-0' data-days='"+t[a].plan_days+"'>"+t[a].plan_days_name+"</p> <span class='font-size-36 font-weight-600' hidden>PHP <span class='text-decoration-line'>"+$.number(t[a].price,2)+"</span></span> <span class='plan-discount-price font-weight-600'>PHP <span class='span-plan-price' data-price='"+t[a].price+"'>"+$.number(t[a].price,2)+"</span></span><br> <button class='font-weight-600 btn btn-orange px-5 btn-plan mt-3' value='"+t[a].id+"'><span class='text-black'>Select</span></button><br> </div> </div> ")}},error:function(a){console.log(a.responseText)}})}function category(){var a=$("input[name=csrf_name]").val();$.ajax({type:"GET",url:"Signup/business_category",dataType:"JSON",data:{csrf_name:a},success:function(a){$("input[name=csrf_name]").val(a.token);for(var t=0;t<a.result.length;t++)$("#info-business-category").append("<option value='"+a.result[t].id+"'>"+a.result[t].desc+"</option>");country()},error:function(a){console.log(a.responseText)}})}function country(){var a=$("input[name='csrf_name']").val();$.ajax({data:{csrf_name:a},type:"POST",dataType:"JSON",url:base_url+"Signup/country",success:function(a){$("input[name='csrf_name']").val(a.token);for(var t=a.result,e=0;e<t.length;e++)$("#info-country").append("<option value='"+t[e].id+"'>"+t[e].country+"</option>"),$("#bill-country").append("<option value='"+t[e].id+"'>"+t[e].country+"</option>");$("#info-country").val(a.country),$("#bill-country").val(a.country)},error:function(a){console.log(a.responseText)}})}function cart_outlet(){var a=$("#cart-plan-outlet-qty").val(),t=$("#plan-type").val(),e="",n=$("input[name=csrf_name]").val(),l="",i="",o=0;$.ajax({data:{csrf_name:n,plan:t},type:"POST",dataType:"JSON",url:base_url+"Store_register/get_plan",success:function(t){$("input[name=csrf_name]").val(t.token),l=t.data[0].outlet_price,e=t.data[0].plan_price,0!=a?(a=a,l=l):(a=0,l=0),i=a*l,o=Number(e)+Number(i),$("#plan-price").val(e),$("#cart-plan-outlet-qty-dp").val(a),$("#cart-plan-outlet-price").text($.number(t.data[0].outlet_price,2)),$("#cart-plan-outlet-total-price").text("PHP "+$.number(i,2)),$("#cart-grand-total").text("PHP "+$.number(o,2)),$("#total_amount").val(o),$("#sml-cart-plan-outlet-qty-dp").val(a),$("#sml-cart-plan-outlet-price").text($.number(t.data[0].outlet_price,2)),$("#sml-cart-plan-outlet-total-price").text("PHP "+$.number(i,2)),$("#sml-cart-grand-total").text("PHP "+$.number(o,2)),$("#total_amount").val(o)},error:function(a){console.log(a.responseText)}})}function check_info(){grecaptcha&&0!==grecaptcha.getResponse().length?$("#info-form").parsley().isValid()&&("0"==$("#info-email").attr("data-exists")||"0"==$("#info-uname").attr("data-exists"))?(div_hide(),"0"==$("#plan-type").val()?check_payment():$("#div-cart").show()):($("#info-form").parsley().validate(),swal({type:"warning",title:"Please input all required fields"})):($("#info-form").parsley().validate(),swal({type:"warning",title:"Please Check reCAPTCHA"}))}function check_plan(a){div_hide(),$("#div-info").show(),$("#plan-type").val(a);var t="",e="",n=0,l="",i=$("input[name=csrf_name]").val(),o=$("#cart-plan-outlet-qty").val();$.ajax({data:{csrf_name:i,plan:a},type:"POST",dataType:"JSON",url:base_url+"Store_register/get_plan",success:function(i){$("input[name=csrf_name]").val(i.token),e=i.data[0].plan_price,t=i.data[0].plan_name,n=i.data[0].outlet_price,$("#plan-price").val(e),$("#cart-plan-name").text(t),$("#cart-plan-price").text("PHP "+$.number(e,2)),$("#cart-plan-total-price").text("PHP "+$.number(e,2)),$("#sml-cart-plan-name").text(t),$("#sml-cart-plan-price").text("PHP "+$.number(e,2)),$("#sml-cart-plan-total-price").text("PHP "+$.number(e,2)),$("#cart-grand-total").text("PHP "+$.number(e,2)),$("#total_amount").val(e),$("#cart-plan-name").html(t.replace(/\n/g,"<br />")),$("#cart-plan-name").html(t.replace(/\n/g,"<br />")),a>4?($("#tbl-row-cart-plan-outlet").show(),$("#sml-tbl-row-cart-plan-outlet").show()):($("#tbl-row-cart-plan-outlet").hide(),$("#sml-tbl-row-cart-plan-outlet").hide()),0!=o?(o=o,n=n):(o=0,n=0),total=o*n,l=Number(e)+Number(total),$("#cart-plan-outlet-qty-dp").val(o),$("#cart-plan-outlet-price").text($.number(i.data[0].outlet_price,2)),$("#cart-plan-outlet-total-price").text("PHP "+$.number(total,2)),$("#cart-grand-total").text("PHP "+$.number(l,2)),$("#sml-cart-plan-outlet-qty-dp").val(o),$("#sml-cart-plan-outlet-price").text($.number(i.data[0].outlet_price,2)),$("#sml-cart-plan-outlet-total-price").text("PHP "+$.number(total,2)),$("#sml-cart-grand-total").text("PHP "+$.number(l,2)),$("#total_amount").val(l)},error:function(a){console.log(a.responseText)}})}function check_cart(){div_hide(),$("#div-payment").show(),$("#payment-grand-total").text("PHP "+$.number($("#total_amount").val(),2)),$("#bill-fname").val($("#info-fname").val()),$("#bill-lname").val($("#info-lname").val()),$("#bill-address").val($("#info-business-address").val()),$("#bill-town").val($("#info-town").val()),$("#bill-province").val($("#info-province").val()),$("#bill-town").attr("data-id",$("#info-town").attr("data-id")),$("#bill-town").attr("data-prov",$("#info-town").attr("data-prov")),$("#bill-zipcode").val($("#info-zipcode").val()),$("#bill-email").val($("#info-email").val()),$("#bill-mobile").val($("#info-mobile").val()),$("#bill-phone").val($("#info-phone").val()),$("#bill-phone-code").val($("#info-phone-code").val())}function check_bill(){div_hide(),$("#div-payment").show(),$("#bill-form").parsley().isValid()||swal({type:"warning",title:"Please input all required fields"})}function check_payment(){$("#payment-grand-total").text("PHP "+$.number($("#total_amount").val(),2)),$("#bill-fname").val($("#info-fname").val()),$("#bill-lname").val($("#info-lname").val()),$("#bill-address").val($("#info-business-address").val()),$("#bill-town").val($("#info-town").val()),$("#bill-province").val($("#info-province").val()),$("#bill-town").attr("data-id",$("#info-town").attr("data-id")),$("#bill-town").attr("data-prov",$("#info-town").attr("data-prov")),$("#bill-zipcode").val($("#info-zipcode").val()),$("#bill-email").val($("#info-email").val()),$("#bill-mobile").val($("#info-mobile").val()),$("#bill-phone").val($("#info-phone").val()),$("#bill-phone-code").val($("#info-phone-code").val()),"0"==$("#plan-type").val()?($("#payment-type").val("0"),check_payment_details()):""!=$("#payment-type").val()?(div_hide(),$("#div-payment-details").show(),$("#div-card-payment-details").hide(),$("#div-bank-payment-details").hide(),"1"==$("#payment-type").val()?card_payment():bank_payment()):swal({type:"warning",title:"No Payment Method Selected",text:"Please select payment method"})}function card_payment(){$("#div-card-payment-details").show();var a=$("#total_amount").val();swal({type:"warning",title:"Payment Loading",timer:3e3,showCancelButton:!1,showConfirmButton:!1}),paypal.Buttons({createOrder:function(t,e){return e.order.create({purchase_units:[{amount:{value:a}}]})},onApprove:function(a,t){return t.order.capture().then(function(a){check_payment_details()})}}).render("#paypal-button-container")}function bank_payment(){$("#div-bank-payment-details").show()}function check_payment_details(){var a=$("#info-fname").val(),t=$("#info-mname").val(),e=$("#info-lname").val(),n=$(".info-gender:checked").val(),l=$("#info-bday").val(),i=$("#info-fb").val(),o=$("#info-uname").val(),r=$("#info-pword").val(),c=$("#info-business-name").val(),s=$("#info-business-category").val(),p=$("#info-business-address").val(),u=$("#info-town").attr("data-id"),d=$("#info-town").attr("data-prov"),m=$("#info-zipcode").val(),v=$("#info-country").val(),f=$("#info-email").val(),_=$("#info-mobile").val(),b=$("#info-phone").val(),y=$("#info-phone-code").val(),h=$("#info-partner").attr("data-id"),w=$("#info-partner").attr("data-lvl-2"),g=$("#info-partner").attr("data-lvl-3"),k=$("#plan-type").val(),x=$("#plan-price").val(),P=$("#cart-plan-outlet-qty").val(),S=$("#cart-plan-outlet-price").text().replace(",",""),T=$("#total_amount").val(),q=(.12*T/1.12).toFixed(2),O=c,H={info_fname:a,info_mname:t,info_lname:e,info_gender:n,info_bday:l,info_fb:i,info_uname:o,info_pword:r,info_business_name:c,info_business_category:s,info_address:p,info_town:u,info_province:d,info_zipcode:m,info_country:v,info_email:f,info_mobile:_,info_phone:b,info_phone_area:y,info_partner:h,info_level_2:w,info_level_3:g,plan_type:k,plan_price:x,plan_outlet_qty:P,plan_outlet_price:S,plan_total_amount:T},j={bill_fname:$("#bill-fname").val(),bill_mname:t,bill_lname:$("#bill-lname").val(),bill_company:$("#bill-company").val(),bill_address:$("#bill-address").val(),bill_town:$("#bill-town").attr("data-id"),bill_province:$("#bill-town").attr("data-prov"),bill_zipcode:$("#bill-zipcode").val(),bill_country:$("#bill-country").val(),bill_email:$("#bill-email").val(),bill_mobile:$("#bill-mobile").val(),bill_phone:$("#bill-phone").val(),bill_phone_code:$("#bill-phone-code").val(),plan_type:k,plan_price:x,plan_outlet_qty:P,plan_outlet_price:S,plan_total_vat:q,plan_total_amount:T,payment_type:$("#payment-type").val()},z={account_id:"",account_name:c,link_name:O=(O=$.trim(O.toString().toLowerCase())).replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,""),account_status:0,confirm_email:0,business_category:s,username:f,password:"password",first_name:a,middle_name:t,last_name:e,address:p,city:u,user_id:"0",province:d,email:f,mobile_no:_,gender:n,birthday:l},N={account_id:"",status:0,first_name:a,middle_name:a,last_name:e,username:f,password:"password",email:f,birthday:l,gender:n},C=$("input[name=csrf_name]").val();$.ajax({data:{csrf_name:C,info_user:H,info_bill:j,info_outletko:z,info_outletsuite:N},type:"POST",dataType:"JSON",url:base_url+"Store_register/save_account",beforeSend:function(){swal({type:"info",title:"Saving....",showCancelButton:!1,showConfirmButton:!1})},success:function(a){console.log(a),$("input[name=csrf_name]").val(a.token),swal({type:"success",title:"Your Online Store Registration is Completed"},function(){window.open(base_url,"_self")})},error:function(a){console.log(a),console.log(a.responseText)}})}$(document).ready(function(){category(),$("#div-info").hide(),$("#div-plan").hide(),$("#div-cart").hide(),$("#div-bill").hide(),$("#div-payment").hide(),$("#div-payment-details").hide(),$("#div-plan").show(),$("#info-mobile").mobilenumber(),$("#info-phone").mobilenumber(),$("#bill-mobile").mobilenumber(),$("#bill-phone").mobilenumber(),$("#cart-plan-outlet-qty").number(!0,0),window.Parsley.addValidator("uppercase",{requirementType:"number",validateString:function(a,t){return(a.match(/[A-Z]/g)||[]).length>=t},messages:{en:"Your password must contain at least (%s) uppercase letter."}}),window.Parsley.addValidator("lowercase",{requirementType:"number",validateString:function(a,t){return(a.match(/[a-z]/g)||[]).length>=t},messages:{en:"Your password must contain at least (%s) lowercase letter."}}),window.Parsley.addValidator("number",{requirementType:"number",validateString:function(a,t){return(a.match(/[0-9]/g)||[]).length>=t},messages:{en:"Your password must contain at least (%s) number."}}),window.Parsley.addValidator("special",{requirementType:"number",validateString:function(a,t){return(a.match(/[^a-zA-Z0-9]/g)||[]).length>=t},messages:{en:"Your password must contain at least (%s) special characters."}}),$("#info-bday").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm/dd/yy",yearRange:"-100:+0",maxDate:"0",onClose:function(){$(this).parsley().validate()}}),$("#info-bday").datepicker("option","defaultDate",new Date(2004,0,1)),$("#info-town").autocomplete({focus:function(a,t){$("#info-town").attr("data-id",t.item.city_id),$("#info-town").attr("data-prov",t.item.prov_id),$("#info-province").val(t.item.province)},select:function(a,t){$("#info-town").attr("data-id",t.item.city_id),$("#info-town").attr("data-prov",t.item.prov_id),$("#info-province").val(t.item.province)},source:function(a,t){var e=$("input[name=csrf_name]").val(),n=$("#info-town").val(),l=$("#info-country").val();$.ajax({url:"Signup/search_city_prov/",dataType:"json",type:"POST",data:{city:n,country:l,csrf_name:e},success:function(a){$("input[name=csrf_name]").val(a.token),"true"==a.response?t(a.result):($("#info-town").val(""),$("#info-province").val(""),$("#info-town").attr("data-id",""),$("#info-town").attr("data-prov",""),t(""))},error:function(a){console.log("Error: "+a.responseText)}})}}),$("#bill-town").autocomplete({focus:function(a,t){$("#bill-town").attr("data-id",t.item.city_id),$("#bill-town").attr("data-prov",t.item.prov_id),$("#bill-province").val(t.item.province)},select:function(a,t){$("#bill-town").attr("data-id",t.item.city_id),$("#bill-town").attr("data-prov",t.item.prov_id),$("#bill-province").val(t.item.province)},source:function(a,t){var e=$("input[name=csrf_name]").val(),n=$("#bill-town").val();$.ajax({url:"Signup/search_city_prov/",dataType:"json",type:"POST",data:{city:n,csrf_name:e},success:function(a){$("input[name=csrf_name]").val(a.token),"true"==a.response?t(a.result):($("#bill-town").val(""),$("#bill-province").val(""),$("#bill-town").attr("data-id",""),$("#bill-town").attr("data-prov",""),t(""))},error:function(a){console.log("Error: "+a.responseText)}})}}),$("#info-partner").autocomplete({select:function(a,t){$("#info-partner").attr("data-id",t.item.partner_id),$("#info-partner").attr("data-lvl-2",t.item.lvl_2),$("#info-partner").attr("data-lvl-3",t.item.lvl_3)},source:function(a,t){var e=$("input[name=csrf_name]").val(),n=$("#info-partner").val();$.ajax({url:"Signup/search_partner/",dataType:"json",type:"POST",data:{partner:n,csrf_name:e},success:function(a){$("input[name=csrf_name]").val(a.token),"true"==a.response?t(a.result):($("#info-partner").val(""),$("#info-partner").attr("data-id",""),t(""))},error:function(a){console.log("Error: "+a.responseText)}})}}),$("#info-form").parsley({errors:{container:function(a){return console.log(a),$(a).parent()}}}),$("#bill-form").parsley({errors:{container:function(a){return $(a).parent()}}}),$("#info-country").change(function(){$("#info-town").val(""),$("#info-province").val(""),$("#info-town").attr("data-id",""),$("#info-town").attr("data-prov",""),$("#bill-town").val(""),$("#bill-province").val(""),$("#bill-town").attr("data-id",""),$("#bill-town").attr("data-prov","")}),$("#info-email").blur(function(){var a=$(this).val(),t=$("input[name='csrf_name']").val();1==$("#info-email").parsley().validationResult&&($("#parsley-email").remove(),$("#info-email").attr("data-exists","0"),$.ajax({data:{email:a,csrf_name:t},type:"POST",dataType:"JSON",url:base_url+"Store_register/check_email",success:function(a){console.log(a),$("input[name='csrf_name']").val(a.token),a.result>0&&($("#info-email").attr("data-exists","1"),$(".div-email").append('<ul class="parsley-errors-list filled" id="parsley-email" aria-hidden="false"><li class="parsley-type">Email already exists.</li></ul>'))},error:function(a){console.log(a.responseText)}}))}),$("#info-uname").keyup(function(){var a=$(this).val(),t=$("input[name='csrf_name']").val();1==$("#info-uname").parsley().validationResult&&($("#parsley-uname").remove(),$("#info-uname").attr("data-exists","0"),$.ajax({data:{uname:a,csrf_name:t},type:"POST",dataType:"JSON",url:base_url+"Store_register/check_uname",success:function(a){console.log(a),$("#parsley-uname").remove(),$("input[name='csrf_name']").val(a.token),a.result>0&&($("#info-uname").attr("data-exists","1"),$(".div-uname").append('<ul class="parsley-errors-list filled" id="parsley-uname" aria-hidden="false"><li class="parsley-type">Username already exists.</li></ul>'))},error:function(a){console.log(a.responseText)}}))}),$("#cart-plan-outlet-qty").keyup(function(){""==$(this).val()?($(this).val("0"),$("#cart-plan-outlet-qty").val("0"),$("#sml-cart-plan-outlet-qty").val("0")):($(this).val()>3?($("#cart-plan-outlet-qty").val("3"),$("#sml-cart-plan-outlet-qty").val("3")):($("#sml-cart-plan-outlet-qty").val($(this).val()),$("#cart-plan-outlet-qty").val($(this).val())),cart_outlet())}),$("#sml-cart-plan-outlet-qty").keyup(function(){""==$(this).val()?($(this).val("0"),$("#cart-plan-outlet-qty").val("0"),$("#sml-cart-plan-outlet-qty").val("0")):cart_outlet(),$("#cart-plan-outlet-qty").val($(this).val()),$("#sml-cart-plan-outlet-qty").val($(this).val())}),$(".div-payment-type").click(function(){$(".div-payment-type").css("background","white"),$("#"+$(this).attr("id")).css("background","#ffa812"),"div-card-payment"==$(this).attr("id")?$("#payment-type").val("1"):$("#payment-type").val("2"),check_payment()}),$("#btn-next-info").click(function(){check_info()}),$(document).on("click",".btn-plan",function(){check_plan($(this).val())}),$("#btn-next-cart").click(function(){check_payment()}),$("#btn-next-bill").click(function(){check_bill()}),$("#btn-next-payment").click(function(){check_payment("10")}),$("#btn-next-payment-details").click(function(){check_payment_details()}),$("#btn-back-info").click(function(){div_hide(),$("#div-plan").show()}),$("#btn-back-cart").click(function(){div_hide(),$("#div-info").show()}),$("#btn-back-bill").click(function(){div_hide(),$("#div-cart").show()}),$("#btn-back-payment").click(function(){div_hide(),$("#div-bill").show()}),$("#btn-back-payment-details").click(function(){div_hide(),$("#div-payment").show()}),$("#btn-bank-payment").click(function(){check_payment_details()})}),jQuery.fn.mobilenumber=function(){return this.each(function(){$(this).keydown(function(a){var t=a.charCode||a.keyCode||0;return 8==t||9==t||13==t||46==t||110==t||190==t||t>=35&&t<=40||t>=48&&t<=57||t>=96&&t<=105})})};